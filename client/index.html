<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>AI Background Removal</title>
    <link rel="icon" href="data:," />
    <style>
      /* --- (gi·ªØ style g·ªçn l·∫°i cho ng·∫Øn; b·∫°n c√≥ th·ªÉ d√°n nguy√™n style c≈©) --- */
      *{margin:0;padding:0;box-sizing:border-box}
      body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
      .container{max-width:1200px;margin:0 auto;background:#fff;border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.1);overflow:hidden}
      .header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:40px;text-align:center}
      .header h1{font-size:2.2rem;margin-bottom:10px;font-weight:700}
      .main{padding:40px}
      .upload{ text-align:center;margin-bottom:30px}
      .drop{border:3px dashed #e1e5e9;border-radius:15px;padding:50px 20px;background:#fafbfc;cursor:pointer;transition:.2s}
      .drop:hover,.drop.dragover{border-color:#667eea;background:#f0f4ff;transform:scale(1.01)}
      .options{background:#f8f9fa;border-radius:15px;padding:20px;margin:24px 0}
      .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}
      .btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:0;padding:12px 22px;border-radius:40px;font-weight:600;cursor:pointer}
      .btn:disabled{opacity:.6;cursor:not-allowed}
      .loading{display:none;text-align:center;margin:20px 0}
      .bar{height:6px;background:#e1e5e9;border-radius:3px;overflow:hidden;margin-top:10px}
      .fill{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);width:0%;transition:width .2s}
      .result{display:none;margin-top:24px}
      .grid2{display:grid;grid-template-columns:1fr 1fr;gap:20px}
      .img{max-width:100%;max-height:420px;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.08);background:#fff}
      .msg{margin:12px 0;padding:10px;border-radius:8px}
      .ok{background:#d4edda;color:#155724;border:1px solid #c3e6cb}
      .err{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}
      @media (max-width:900px){.grid2{grid-template-columns:1fr}.main{padding:20px}}
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üé® AI Background Removal</h1>
        <p>Powered by @imgly/background-removal (ESM)</p>
      </div>

      <div class="main">
        <div id="messages"></div>

        <div class="upload">
          <div class="drop" id="drop">
            <div style="font-size:2.6rem;color:#667eea;margin-bottom:8px">üìÅ</div>
            <div style="color:#444;margin-bottom:6px">Drop image or click to browse</div>
            <div style="color:#888">Supports JPG, PNG, WebP (max 10MB)</div>
            <input type="file" id="file" accept="image/*" style="display:none" />
          </div>
        </div>

        <div class="options">
          <div class="grid">
            <div>
              <label>Output format</label>
              <select id="fmt" style="width:100%;padding:10px;margin-top:6px">
                <option value="image/png">PNG (Transparent)</option>
                <option value="image/webp">WebP</option>
                <option value="image/jpeg">JPEG</option>
              </select>
            </div>
            <div>
              <label>Quality (JPEG/WebP)</label>
              <input type="range" id="q" min="0.1" max="1" step="0.1" value="0.9" style="width:100%" />
              <div><span id="qv">0.9</span></div>
            </div>
            <div>
              <label>Model</label>
              <select id="model" style="width:100%;padding:10px;margin-top:6px">
                <option value="medium">Medium (Balanced)</option>
                <option value="small">Small (Fast)</option>
                <option value="large">Large (Quality)</option>
              </select>
            </div>
          </div>
        </div>

        <div style="text-align:center">
          <button class="btn" id="run" disabled>Remove Background</button>
        </div>

        <div class="loading" id="loading">
          <div>Processing‚Ä¶</div>
          <div class="bar"><div id="fill" class="fill"></div></div>
        </div>

        <div class="result" id="result">
          <div class="grid2">
            <div>
              <h3>Original</h3>
              <img id="orig" class="img" alt="original" />
            </div>
            <div>
              <h3>Removed</h3>
              <img id="out" class="img" alt="removed" />
              <div style="margin-top:12px">
                <button class="btn" id="download" style="background:#28a745">Download</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- d√πng ESM: Vite s·∫Ω bundle @imgly/background-removal -->
    <script type="module" src="/src/main.js"></script>
  </body>
</html>